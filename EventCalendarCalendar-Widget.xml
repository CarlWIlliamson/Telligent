<scriptedContentFragments>
	<scriptedContentFragment name="${resource:calendar_CalendarWidgetName}" version="10.1.8.10498" description="${resource:calendar_CalendarWidgetDescription}" instanceIdentifier="36ee9a45ac7a497ca43b07458e37d5c9" theme="" isCacheable="true" varyCacheByUser="true" showHeaderByDefault="true" cssClass="calendar-fragment">
		<contentScript><![CDATA[#set($selectedCalendarOrGroup = $core_v2_widget.GetStringValue("selectedCalendarOrGroup", ""))
#set($parsedCalendarOrGroup = $core_v2_page.ParseQueryString($selectedCalendarOrGroup))
#set($calendars = false)
#set($currentCalendar = false)
#set($calendars = $parsedCalendarOrGroup.Values('Calendar'))
#set($group = false)
#set($group = $parsedCalendarOrGroup.Value('Group'))
#set($includeSubGroups = $parsedCalendarOrGroup.Value('IncludeSubGroups'))
#if ($selectedCalendarOrGroup.Length == 0)
  #set ($includeSubGroups = false)
#end

#if(!$calendars && !$group)
    #set($currentCalendar = $calendar_v1_calendars.Current)
    #if (!$currentCalendar)
        #set($group = $core_v2_group.Current.Id)
    #end
#elseif($calendars)
  #set($calendarIds = "")
  ## get posts related to a group or groups
  ## construct a comma-separated string of calendar ids
  #foreach ($calendar in $calendars)
    ## id of 0 means use the current calendar
    #if ($calendar == -1)
      #set ($calendar = $calendar_v1_calendars.Current.Id)
    #end
    #if($calendar > 0)
      #if(!$calendars)
        #set($calendarIds = "$calendar")
      #else
        #if($calendarIds == "")
          #set($calendarIds = "$calendar")
        #else
          #set($calendarIds = "$calendarIds,$calendar")
        #end
      #end
    #end
  #end
#elseif ($group)
  #if ($group == 0)
    #set($group = $core_v2_group.Current.Id)
  #end
#end

<div id="$core_v2_widget.UniqueId('wrapper')" class="event-calendar">
  <div id="$core_v2_widget.UniqueId('loading')" class="ui-loading"></div>
  <div id="$core_v2_widget.UniqueId('content')" class="event_calendar_content"></div>
</div>

#registerEndOfPageHtml('telligent.evolution.Calendar.widgets.calendar')
  <script type="text/javascript" src="$core_v2_encoding.HtmlAttributeEncode($core_v2_widget.GetFileUrl('ui.js'))"></script>
#end

#registerEndOfPageHtml()
  <script type="text/javascript">
  //<!--31154f2f1a944c64b0e644f1022f506c-cdata-start-->
  jQuery(document).ready(function(j)
  {
    j.telligent.evolution.Calendar.widgets.calendar.register({
      month: $core_v2_utility.CurrentDate.Month,
      year: $core_v2_utility.CurrentDate.Year,
      calendarId: #if($currentCalendar.Id > 0)$currentCalendar.Id #else -1 #end,
      calendarIds: #if($calendarIds)'$calendarIds'#else''#end,
      content: j('#$core_v2_widget.UniqueId('content')'),
      errorText: '$core_v2_encoding.JavascriptEncode($core_v2_language.GetResource('calendar_CalendarErrorMessage'))',
      includeSubGroups: #if($includeSubGroups == true)true #else false #end,
      loadingUrl: '$core_v2_encoding.JavascriptEncode($core_v2_widget.GetExecutedFileUrl('calendar.vm'))',
      referenceId: #if($group) $group #else -1 #end,
      wrapper: j('#$core_v2_widget.UniqueId('wrapper')'),
      loading: j('#$core_v2_widget.UniqueId('loading')')
    });
  });
  //>
  </script>
#end
]]></contentScript>
		<headerScript><![CDATA[$core_v2_widget.ApplyTokens($core_v2_widget.GetStringValue('fragmentHeader', '${resource:calendar_CalendarWidgetTitle}'))]]></headerScript>
		<configuration><![CDATA[      <propertyGroup id="options" resourceName="Options">
        <property id="fragmentHeader" resourceName="CF_Title" dataType="string" defaultValue="${resource:calendar_CalendarWidgetTitle}" controlType="Telligent.Evolution.Controls.ContentFragmentTokenStringControl, Telligent.Evolution.Platform" />
        <property id="selectedCalendarOrGroup" resourceName="calendar_SelectGroupAndCalendar" dataType="custom" controlType="Telligent.Evolution.Extensions.Calendar.Controls.CalendarSelectionControl, Telligent.Evolution.Calendar" width="95%" />
        <property id="links" resourceName="calendar_Links" dataType="custom" defaultValue="Link=calendarSubscribe&amp;Link=calendarRss" controlType="Telligent.Evolution.Controls.SortableListControl, Telligent.Evolution.Platform" height="300" key="Link" >
          <propertyValue value="calendarRss" resourceName="calendar_CalendarLinks_RssLink" />
          <propertyValue value="calendarSubscribe" resourceName="calendar_CalendarLinks_Subscribe" />
          <propertyValue value="calendarEdit" resourceName="calendar_CalendarLinks_EditLink" />
        </property>
      </propertyGroup>
      ]]></configuration>
		<languageResources><language key="en-us">
  <resource name="AndMore_Plural">And {0} more...</resource>
  <resource name="AndMore_Singular">And 1 more...</resource>
  <resource name="calendar_CalendarErrorMessage">There was an error loading the calendar.</resource>
  <resource name="calendar_CalendarLinks_Add">&lt;span&gt;&lt;/span&gt;Add Calendar</resource>
  <resource name="calendar_CalendarLinks_AddLink">Add Calendar</resource>
  <resource name="calendar_CalendarLinks_DeleteCalendar">&lt;span&gt;&lt;/span&gt;Delete Calendar</resource>
  <resource name="calendar_CalendarLinks_DeleteLink">Delete Calendar</resource>
  <resource name="calendar_CalendarLinks_Edit">Manage Calendar</resource>
  <resource name="calendar_CalendarLinks_EditLink">Manage Calendar</resource>
  <resource name="calendar_CalendarLinks_Rss">RSS</resource>
  <resource name="calendar_CalendarLinks_RssLink">RSS Subscription</resource>
  <resource name="calendar_CalendarLinks_Subscribe">Email Subscribe</resource>
  <resource name="calendar_CalendarMonthLabelFormat">MMMM yyyy</resource>
  <resource name="calendar_CalendarNextLinkText"> </resource>
  <resource name="calendar_CalendarPreviousLinkText"> </resource>
  <resource name="calendar_CalendarWidgetDescription">Renders an event calendar's events in a calendar format</resource>
  <resource name="calendar_CalendarWidgetName">Event Calendar - Calendar</resource>
  <resource name="calendar_CalendarWidgetTitle">Calendar</resource>
  <resource name="calendar_EventLinks_Add">Add a new event</resource>
  <resource name="calendar_EventLinks_AddLink">Add Event</resource>
  <resource name="calendar_Links">Select, rearrange, and enable the links to be displayed</resource>
  <resource name="calendar_Options_Description">Links for a calendar</resource>
  <resource name="calendar_SelectGroupAndCalendar">Select group/calendar to pull content from</resource>
  <resource name="calendar_Subscribe_Off">Turn Calendar notifications on</resource>
  <resource name="calendar_Subscribe_On">Turn Calendar notifications off</resource>
  <resource name="cancel">Cancel</resource>
  <resource name="CF_Title">Widget Title</resource>
  <resource name="EventDateTimeEndFormatString">hh:mm tt</resource>
  <resource name="EventDateTimeFormatString">MMMM dd, yyyy, hh:mm tt</resource>
  <resource name="more">More</resource>
  <resource name="Options">Options</resource>
  <resource name="Today">Today</resource>
</language></languageResources>
		<files>
			<file name="calendar.vm">JGNvcmVfdjJfd2lkZ2V0LkV4ZWN1dGVGaWxlKCJTZXRRdWVyeS52bSIpDQoNCiNpZigoJHRvdGFsRGF5cyArICRzdGFydERheSkgJSA3ID09IDApDQojc2V0KCR0b3RhbENlbGxzID0gJHRvdGFsRGF5cyArICRzdGFydERheSkNCiNlbHNlDQojc2V0KCR0b3RhbENlbGxzID0gKCR0b3RhbERheXMgKygkc3RhcnREYXkpKSArICg3IC0gKCAoJHRvdGFsRGF5cyArKCRzdGFydERheSkpICUgNykpKQ0KI2VuZA0KDQojc2V0KCRub0ZvbGxvd05hdmlnYXRpb24gPSAkY29yZV92Ml91dGlsaXR5LkN1cnJlbnREYXRlLlN1YnRyYWN0KCRiZWdpbkRhdGUpLlRvdGFsRGF5cykNCiNpZiAoJG5vRm9sbG93TmF2aWdhdGlvbiA8IDApDQogICAgI3NldCgkbm9Gb2xsb3dOYXZpZ2F0aW9uID0gMCAtICRub0ZvbGxvd05hdmlnYXRpb24pDQojZW5kDQojaWYgKCRub0ZvbGxvd05hdmlnYXRpb24gPiAzNjUpDQogICAgI3NldCgkbm9Gb2xsb3dOYXZpZ2F0aW9uID0gdHJ1ZSkNCiNlbHNlDQogICAgI3NldCgkbm9Gb2xsb3dOYXZpZ2F0aW9uID0gZmFsc2UpDQojZW5kDQogICAgIA0KPHRhYmxlIGNsYXNzPSJldmVudF9jYWxlbmRhciIgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIj4NCiAgICA8dGhlYWQ+DQogICAgPHRyIGNsYXNzPSJtb250aF9oZWFkIj4NCiAgICAgICAgPHRoIGNvbHNwYW49IjciPg0KICAgICAgICAgICAgPGRpdiBjbGFzcz0ibW9udGhfd3JhcHBlciI+DQogICAgICAgICAgICAgICAgI3NldCgkbW9udGhGb3JtYXQgPSAgJGNvcmVfdjJfbGFuZ3VhZ2UuR2V0UmVzb3VyY2UoImNhbGVuZGFyX0NhbGVuZGFyTW9udGhMYWJlbEZvcm1hdCIpKQ0KICAgICAgICAgICAgICAgIDxhIGhyZWY9IiMiIGNsYXNzPSJwcmV2X2xpbmsiICNpZigkbm9Gb2xsb3dOYXZpZ2F0aW9uKSByZWw9Im5vZm9sbG93IiNlbmQ+JGNvcmVfdjJfbGFuZ3VhZ2UuR2V0UmVzb3VyY2UoImNhbGVuZGFyX0NhbGVuZGFyUHJldmlvdXNMaW5rVGV4dCIpPC9hPg0KICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJtb250aF9sYWJlbCI+JGNvcmVfdjJfbGFuZ3VhZ2UuRm9ybWF0RGF0ZSgkYmVnaW5EYXRlLCAiJXtBZGp1c3RUaW1lWm9uZSA9ICdmYWxzZScsIEZvcm1hdCA9ICckbW9udGhGb3JtYXQnfSIpPC9zcGFuPg0KICAgICAgICAgICAgICAgIDxhIGhyZWY9IiMiIGNsYXNzPSJuZXh0X2xpbmsiICNpZigkbm9Gb2xsb3dOYXZpZ2F0aW9uKSByZWw9Im5vZm9sbG93IiNlbmQ+JGNvcmVfdjJfbGFuZ3VhZ2UuR2V0UmVzb3VyY2UoImNhbGVuZGFyX0NhbGVuZGFyTmV4dExpbmtUZXh0Iik8L2E+DQogICAgICAgICAgICA8L2Rpdj4NCgkJCSRjb3JlX3YyX3dpZGdldC5FeGVjdXRlRmlsZSgnbW9yZS52bScpDQogICAgICAgIDwvdGg+DQogICAgPC90cj4NCiAgICA8dHIgY2xhc3M9Im1vbnRoX3dlZWtkYXkiPg0KICAgICAgICAjZm9yZWFjaCgkd2Vla2RheSBpbiBbMC4uNl0pDQogICAgICAgICAgICA8dGg+DQogICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImZ1bGxfZGF5Ij4kY2FsZW5kYXJfdjFfVUkuVHJhbnNsYXRlRGF5T2ZXZWVrKCR3ZWVrZGF5LGZhbHNlKTwvc3Bhbj4NCiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz0ic2hvcnRfZGF5Ij4kY2FsZW5kYXJfdjFfVUkuVHJhbnNsYXRlRGF5T2ZXZWVrKCR3ZWVrZGF5LHRydWUpPC9zcGFuPg0KICAgICAgICAgICAgPC90aD4NCiAgICAgICAgI2VuZA0KICAgIDwvdHI+DQogICAgPC90aGVhZD4NCiAgICAgIA0KICAgIDx0Ym9keSBjbGFzcz0ibW9udGhfY2VsbHMiPg0KICAgICNmb3JlYWNoKCRjZWxsIGluIFsxLi4kdG90YWxDZWxsc10pDQogICAgICAgICNpZigkY2VsbCA9PTEgfHwgJGNlbGwgJSA3ID09MSkNCiAgICAgICAgPHRyPg0KICAgICAgICAjZW5kDQogICAgICAgICAgDQogICAgICAgICRjb3JlX3YyX3dpZGdldC5FeGVjdXRlRmlsZSgic3Vidmlldy1jYWxlbmRhci1jZWxsLnZtIikNCg0KICAgICAgICAjaWYoJGNlbGwgJSA3ID09IDApDQogICAgICAgIDwvdHI+DQogICAgICAgICNlbmQNCiAgICAjZW5kDQogICAgPC90Ym9keT4NCjwvdGFibGU+DQo=</file>
			<file name="more.vm">77u/I3NldCgkbGlua3MgPSAkY29yZV92Ml9wYWdlLlBhcnNlUXVlcnlTdHJpbmcoJGNvcmVfdjJfd2lkZ2V0LkdldEN1c3RvbVZhbHVlKCdsaW5rcycsJ0xpbms9Y2FsZW5kYXJTdWJzY3JpYmUmYW1wO0xpbms9Y2FsZW5kYXJFZGl0JmFtcDtMaW5rPWNhbGVuZGFyUnNzJykpKQ0KI3NldCgkaGFzTGlua3MgPSBmYWxzZSkNCiNzZXQoJGN1cnJlbnRHcm91cCA9ICRjb3JlX3YyX2dyb3VwLkN1cnJlbnQpDQojc2V0KCRjdXJyZW50Q2FsZW5kYXIgPSAkY2FsZW5kYXJfdjFfY2FsZW5kYXJzLkN1cnJlbnQpDQoNCjxkaXYgY2xhc3M9Im5hdmlnYXRpb24tbGlzdCBuYXZpZ2F0aW9uIHVpLWxpbmtzIiBkYXRhLW1pbmxpbmtzPSIwIiBkYXRhLW1heGxpbmtzPSIwIj4NCgk8dWw+DQoJCSNmb3JlYWNoKCRsaW5rIGluICRsaW5rcy5WYWx1ZXMoJ0xpbmsnKSkNCgkJCSNzZXQoJHVybCA9IGZhbHNlKQ0KDQoJCQkjaWYoJGxpbmsgPT0gJ2NhbGVuZGFyUnNzJykNCgkJCQkjaWYgKCRjdXJyZW50Q2FsZW5kYXIpDQoJCQkJCSNpZiggJGNhbGVuZGFyX3YxX2NhbGVuZGFycy5IYXNQZXJtaXNzaW9uKCRjdXJyZW50Q2FsZW5kYXIuSWQsJGNhbGVuZGFyX3YxX3Blcm1pc3Npb25zLlZpZXdDYWxlbmRhcikpDQoJCQkJCQkjc2V0KCR1cmwgPSAkY2FsZW5kYXJfdjFfdXJscy5DYWxlbmRhclJzcygkY3VycmVudENhbGVuZGFyLklkKSkNCgkJCQkJCSNpZigkdXJsKQ0KCQkJCQkJCTxsaSBjbGFzcz0ibmF2aWdhdGlvbi1pdGVtIj48YSBocmVmPSIkY29yZV92Ml9lbmNvZGluZy5IdG1sQXR0cmlidXRlRW5jb2RlKCR1cmwpIiBjbGFzcz0iaW50ZXJuYWwtbGluayByc3MiPjxzcGFuPjwvc3Bhbj4kY29yZV92Ml9sYW5ndWFnZS5HZXRSZXNvdXJjZSgnY2FsZW5kYXJfQ2FsZW5kYXJMaW5rc19Sc3MnKTwvYT48L2xpPg0KCQkJCQkJCSNzZXQoJGhhc0xpbmtzID0gdHJ1ZSkNCgkJCQkJCSNlbmQNCgkJCQkJI2VuZA0KCQkJCSNlbmQNCg0KCQkJI2Vsc2VpZigkbGluayA9PSAnY2FsZW5kYXJTdWJzY3JpYmUnKQ0KCQkJCSNpZigkY3VycmVudENhbGVuZGFyKQ0KCQkJCQkjaWYgKCRjb3JlX3YyX3VzZXIuSXNSZWdpc3RlcmVkKCRjb3JlX3YyX3VzZXIuQWNjZXNzaW5nLklkKSAmJiAkY2FsZW5kYXJfdjFfY2FsZW5kYXJzLkhhc1Blcm1pc3Npb24oJGN1cnJlbnRDYWxlbmRhci5JZCwkY2FsZW5kYXJfdjFfcGVybWlzc2lvbnMuVmlld0NhbGVuZGFyKSkNCgkJCQkJCQ0KCQkJCQkJPGxpIGNsYXNzPSJuYXZpZ2F0aW9uLWl0ZW0iPg0KCQkJCQkJCTxhIGRhdGEtbWVzc2FnZW5hbWU9IndpZGdldC4ke2NvcmVfdjJfd2lkZ2V0LldyYXBwZXJFbGVtZW50SWR9LmNhbGVuZGFyU3Vic2NyaWJlIiBkYXRhLWNhbGVuZGFyaWQ9IiRjdXJyZW50Q2FsZW5kYXIuSWQiIGRhdGEtc3Vic2NyaWJlZD0iZmFsc2UiIGhyZWY9IiMiICNpZigkY2FsZW5kYXJfdjFfY2FsZW5kYXJzLklzU3Vic2NyaWJlZCgkY3VycmVudENhbGVuZGFyLklkKSkgc3R5bGU9ImRpc3BsYXk6bm9uZSIgI2VuZD4kY29yZV92Ml9sYW5ndWFnZS5HZXRSZXNvdXJjZSgnY2FsZW5kYXJfU3Vic2NyaWJlX09mZicpPC9hPg0KCQkJCQkJPC9saT4NCgkJCQkJCTxsaSBjbGFzcz0ibmF2aWdhdGlvbi1pdGVtIj4NCgkJCQkJCQk8YSBkYXRhLW1lc3NhZ2VuYW1lPSJ3aWRnZXQuJHtjb3JlX3YyX3dpZGdldC5XcmFwcGVyRWxlbWVudElkfS5jYWxlbmRhclN1YnNjcmliZSIgZGF0YS1jYWxlbmRhcmlkPSIkY3VycmVudENhbGVuZGFyLklkIiBkYXRhLXN1YnNjcmliZWQ9InRydWUiIGhyZWY9IiMiICNpZighJGNhbGVuZGFyX3YxX2NhbGVuZGFycy5Jc1N1YnNjcmliZWQoJGN1cnJlbnRDYWxlbmRhci5JZCkpIHN0eWxlPSJkaXNwbGF5Om5vbmUiICNlbmQ+JGNvcmVfdjJfbGFuZ3VhZ2UuR2V0UmVzb3VyY2UoJ2NhbGVuZGFyX1N1YnNjcmliZV9PbicpPC9hPg0KCQkJCQkJPC9saT4NCg0KCQkJCQkJI3JlZ2lzdGVyRW5kT2ZQYWdlSHRtbCgid2lkZ2V0LiR7Y29yZV92Ml93aWRnZXQuV3JhcHBlckVsZW1lbnRJZH0uY2FsZW5kYXJTdWJzY3JpYmUiKSANCgkJCQkJCQk8c2NyaXB0IHR5cGU9InRleHQvamF2YXNjcmlwdCI+DQoJCQkJCQkJCWpRdWVyeShmdW5jdGlvbihqKXsNCgkJCQkJCQkJCWZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSwgbGluaykgew0KCQkJCQkJCQkJCWoudGVsbGlnZW50LmV2b2x1dGlvbi5wb3N0KHsNCgkJCQkJCQkJCQkJdXJsOiAnJGNvcmVfdjJfZW5jb2RpbmcuSmF2YXNjcmlwdEVuY29kZSgkY29yZV92Ml93aWRnZXQuR2V0RXhlY3V0ZWRGaWxlVXJsKCdzdWJzY3JpYmUudm0nKSknLA0KCQkJCQkJCQkJCQlkYXRhOiB7DQoJCQkJCQkJCQkJCQlzdWJzY3JpYmU6IHZhbHVlLA0KCQkJCQkJCQkJCQkJY2FsZW5kYXJJZDogbGluay5kYXRhKCdjYWxlbmRhcmlkJykNCgkJCQkJCQkJCQkJfSwNCgkJCQkJCQkJCQkJZGF0YVR5cGU6ICdqc29uJywNCgkJCQkJCQkJCQkJc3VjY2VzczogZnVuY3Rpb24ocmVzcG9uc2UpIHsNCgkJCQkJCQkJCQkJCWlmIChyZXNwb25zZS5zdWJzY3JpYmUpIHsNCgkJCQkJCQkJCQkJCQlsaW5rLmNsb3Nlc3QoJ3VsJykuZmluZCgnYVtkYXRhLXN1YnNjcmliZWQ9ImZhbHNlIl0nKS5oaWRlKCk7DQoJCQkJCQkJCQkJCQkJbGluay5jbG9zZXN0KCd1bCcpLmZpbmQoJ2FbZGF0YS1zdWJzY3JpYmVkPSJ0cnVlIl0nKS5zaG93KCk7DQoJCQkJCQkJCQkJCQl9IGVsc2Ugew0KCQkJCQkJCQkJCQkJCWxpbmsuY2xvc2VzdCgndWwnKS5maW5kKCdhW2RhdGEtc3Vic2NyaWJlZD0iZmFsc2UiXScpLnNob3coKTsNCgkJCQkJCQkJCQkJCQlsaW5rLmNsb3Nlc3QoJ3VsJykuZmluZCgnYVtkYXRhLXN1YnNjcmliZWQ9InRydWUiXScpLmhpZGUoKTsNCgkJCQkJCQkJCQkJCX0NCg0KCQkJCQkJCQkJCQkJaWYgKHJlc3BvbnNlLndhcm5pbmdzICYmIHJlc3BvbnNlLndhcm5pbmdzLmxlbmd0aCA+IDApIHsNCgkJCQkJCQkJCQkJCQlqLnRlbGxpZ2VudC5ldm9sdXRpb24ubm90aWZpY2F0aW9ucy5zaG93KHJlc3BvbnNlLndhcm5pbmdzWzBdLCB7IHR5cGU6ICd3YXJuaW5nJyB9KTsNCgkJCQkJCQkJCQkJCX0NCgkJCQkJCQkJCQkJfQ0KCQkJCQkJCQkJCX0pOw0KCQkJCQkJCQkJfQ0KCQkJCQkJCQkJai50ZWxsaWdlbnQuZXZvbHV0aW9uLm1lc3NhZ2luZy5zdWJzY3JpYmUoJ3dpZGdldC4ke2NvcmVfdjJfd2lkZ2V0LldyYXBwZXJFbGVtZW50SWR9LmNhbGVuZGFyU3Vic2NyaWJlJywgZnVuY3Rpb24oZGF0YSl7DQoJCQkJCQkJCQkJdXBkYXRlKCFqKGRhdGEudGFyZ2V0KS5kYXRhKCdzdWJzY3JpYmVkJyksIGooZGF0YS50YXJnZXQpKTsNCgkJCQkJCQkJCX0pOw0KCQkJCQkJCQl9KTsNCgkJCQkJCQk8L3NjcmlwdD4NCgkJCQkJCSNlbmQNCgkJCQkJCSNzZXQoJGhhc0xpbmtzID0gdHJ1ZSkNCgkJCQkJI2VuZA0KCQkJCSNlbmQNCg0KCQkJI2Vsc2VpZigkbGluayA9PSAnY2FsZW5kYXJFZGl0JykNCgkJCQkjaWYgKCRjdXJyZW50Q2FsZW5kYXIpDQoJCQkJCSNpZigkY2FsZW5kYXJfdjFfY2FsZW5kYXJzLkhhc1Blcm1pc3Npb24oJGN1cnJlbnRDYWxlbmRhci5JZCwkY2FsZW5kYXJfdjFfcGVybWlzc2lvbnMuRWRpdENhbGVuZGFyKSkNCgkJCQkJCSNzZXQoJHVybCA9ICRjYWxlbmRhcl92MV91cmxzLkVkaXRDYWxlbmRhcigkY3VycmVudENhbGVuZGFyLklkKSkNCgkJCQkJCSNpZigkdXJsKQ0KCQkJCQkJCTxsaSBjbGFzcz0ibmF2aWdhdGlvbi1pdGVtIj4NCgkJCQkJCQkgIDxhIGhyZWY9IiRjb3JlX3YyX2VuY29kaW5nLkh0bWxBdHRyaWJ1dGVFbmNvZGUoJHVybCkiIGNsYXNzPSJpbnRlcm5hbC1saW5rIGVkaXQtcG9zdCI+DQoJCQkJCQkJCTxzcGFuPjwvc3Bhbj4kY29yZV92Ml9sYW5ndWFnZS5HZXRSZXNvdXJjZSgnY2FsZW5kYXJfQ2FsZW5kYXJMaW5rc19FZGl0JykNCgkJCQkJCQkgIDwvYT4NCgkJCQkJCQk8L2xpPg0KCQkJCQkJCSNzZXQoJGhhc0xpbmtzID0gdHJ1ZSkNCgkJCQkJCSNlbmQNCgkJCQkJI2VuZA0KCQkJCSNlbmQNCgkJCSNlbmQNCgkJI2VuZA0KDQoJCSNpZigkaGFzTGlua3MpDQoJCQk8bGkgY2xhc3M9Im5hdmlnYXRpb24tbGlzdC1pdGVtIj4NCgkJCQk8YSBocmVmPSIjIiBkYXRhLW1vcmU+JGNvcmVfdjJfbGFuZ3VhZ2UuR2V0UmVzb3VyY2UoJ21vcmUnKTwvYT4NCgkJCTwvbGk+DQoJCQk8bGkgY2xhc3M9Im5hdmlnYXRpb24tbGlzdC1pdGVtIj4NCgkJCQk8YSBocmVmPSIjIiBkYXRhLWNhbmNlbD4kY29yZV92Ml9sYW5ndWFnZS5HZXRSZXNvdXJjZSgnY2FuY2VsJyk8L2E+DQoJCQk8L2xpPg0KCQkjZW5kDQoJPC91bD4NCjwvZGl2Pg==</file>
			<file name="SetQuery.vm">I3NldCgkYmVnaW5EYXRlID0gJGNvcmVfdjJfdXRpbGl0eS5QYXJzZURhdGUoJGNvcmVfdjJfcGFnZS5HZXRRdWVyeVN0cmluZ1ZhbHVlKCd3X3llYXInKSwgJGNvcmVfdjJfcGFnZS5HZXRRdWVyeVN0cmluZ1ZhbHVlKCd3X21vbnRoJyksICcxJykpDQojc2V0KCR0b3RhbERheXMgPSAgJGNhbGVuZGFyX3YxX1VJLkRheXNJbk1vbnRoKCRiZWdpbkRhdGUuWWVhci5Ub1N0cmluZygpLCRiZWdpbkRhdGUuTW9udGguVG9TdHJpbmcoKSkpDQojc2V0KCRzdGFydERheSA9ICAkY2FsZW5kYXJfdjFfVUkuR2V0U3RhcnREYXlPZldlZWsoJGJlZ2luRGF0ZSkpDQojc2V0KCRlbmREYXkgPSAkYmVnaW5EYXRlLkFkZE1vbnRocygxKS5BZGREYXlzKC0xKS5EYXkpDQojc2V0KCRncm91cElkID0gJGNvcmVfdjJfdXRpbGl0eS5QYXJzZUludCgkY29yZV92Ml9wYWdlLkdldFF1ZXJ5U3RyaW5nVmFsdWUoJ3dfZ3JvdXBJZCcpKSkNCiNzZXQoJGNhbGVuZGFySWRzID0gJGNvcmVfdjJfcGFnZS5HZXRRdWVyeVN0cmluZ1ZhbHVlKCd3X2NhbGVuZGFySWRzJykpDQojc2V0KCRpbmNsdWRlU3ViR3JvdXBzID0gJGNvcmVfdjJfdXRpbGl0eS5QYXJzZUJvb2woJGNvcmVfdjJfcGFnZS5HZXRRdWVyeVN0cmluZ1ZhbHVlKCd3X2luY2x1ZGVTdWJHcm91cHMnKSkpDQojc2V0KCRjYWxlbmRhcklkID0gJGNvcmVfdjJfdXRpbGl0eS5QYXJzZUludCgkY29yZV92Ml9wYWdlLkdldFF1ZXJ5U3RyaW5nVmFsdWUoJ3dfY2FsZW5kYXJJZCcpKSkNCg0KI3NldCAoJHF1ZXJ5ID0gIiV7IFBhZ2VTaXplID0gOTk5LCBQYWdlSW5kZXggPSAwLCBTb3J0QnkgPSAnU3RhcnREYXRlJywgU29ydE9yZGVyPSdBc2NlbmRpbmcnLCBEYXRlUmFuZ2VTdGFydD0kYmVnaW5EYXRlLkFkZERheXMoLTEpLCBEYXRlUmFuZ2VFbmQ9JGJlZ2luRGF0ZS5BZGRNb250aHMoMSkuQWRkRGF5cygyKSB9IikNCg0KI2lmKCRncm91cElkICYmICRncm91cElkID4gMCkNCiAgICAkcXVlcnkuQWRkKCdDYWxlbmRhckNvbnRleHQnLCAnR3JvdXAnKQ0KICAgICRxdWVyeS5BZGQoJ0NhbGVuZGFyUmVmZXJlbmNlSWQnLCAkZ3JvdXBJZCkNCiNlbmQNCg0KJHF1ZXJ5LkFkZCgnSW5jbHVkZVN1Ykdyb3VwcycsICRpbmNsdWRlU3ViR3JvdXBzKQ0KDQojaWYoJGNhbGVuZGFySWRzICYmICRjYWxlbmRhcklkcy5MZW5ndGggPiAwICYmICRjYWxlbmRhcklkcyAhPSAiLTEiKQ0KCSRxdWVyeS5BZGQoJ0ZpbHRlckJ5Q2FsZW5kYXJJZExpc3QnLCAkY2FsZW5kYXJJZHMpDQojZW5kDQoNCiNpZighJGdyb3VwSWQgfHwgJGdyb3VwSWQgPD0gMCkNCiAgICAjaWYgKCEkY2FsZW5kYXJJZHMgfHwgJGNhbGVuZGFySWRzID09IC0xIHx8ICRjYWxlbmRhcklkcy5MZW5ndGggPD0gMCkNCiAgICAgICAgJHF1ZXJ5LkFkZCgnQ2FsZW5kYXJJZCcsICRjYWxlbmRhcklkKQ0KICAgICNlbmQNCiNlbmQNCiNzZXQoJGV2ZW50cyA9ICRjYWxlbmRhcl92MV9ldmVudHMuTGlzdCgkcXVlcnkpKQ==</file>
			<file name="subscribe.vm">77u/I3NldCgkdHlwZSA9ICRjb3JlX3YyX3BhZ2UuR2V0Rm9ybVZhbHVlKCd0eXBlJykpDQojc2V0KCRzdWJzY3JpYmUgPSAkY29yZV92Ml91dGlsaXR5LlBhcnNlQm9vbCgkY29yZV92Ml9wYWdlLkdldEZvcm1WYWx1ZSgnc3Vic2NyaWJlJykpKQ0KJGNvcmVfdjJfcGFnZS5TZXRDb250ZW50VHlwZSgnYXBwbGljYXRpb24vanNvbicpDQoNCiRjYWxlbmRhcl92MV9jYWxlbmRhcnMuU2V0U3Vic2NyaWJlZCgkY29yZV92Ml91dGlsaXR5LlBhcnNlSW50KCRjb3JlX3YyX3BhZ2UuR2V0Rm9ybVZhbHVlKCdjYWxlbmRhcklkJykpLCAkc3Vic2NyaWJlKQ0KeyJzdWJzY3JpYmUiOiNpZigkc3Vic2NyaWJlKSB0cnVlI2Vsc2UgZmFsc2UjZW5kfQ==</file>
			<file name="subview-calendar-cell.vm">I3NldCgkaXNDYWxlbmRhckRheSA9ICgkY2VsbCA+PSAoJHN0YXJ0RGF5ICsxKSAmJiAkY2VsbCA8PSAkZW5kRGF5ICsgKCRzdGFydERheSkpKQ0KI3NldCgkY3NzQ2xhc3NDZWxsID0gImVtcHR5X2NlbGwiKQ0KI2lmKCRpc0NhbGVuZGFyRGF5KQ0KCSAgI3NldCgkZGF5ID0gJGNlbGwgLSAkc3RhcnREYXkpDQoJICAjc2V0KCRjZWxsRGF0ZSA9ICRjb3JlX3YyX3V0aWxpdHkuUGFyc2VEYXRlKCRiZWdpbkRhdGUuWWVhci5Ub1N0cmluZygpLCRiZWdpbkRhdGUuTW9udGguVG9TdHJpbmcoKSwkZGF5LlRvU3RyaW5nKCkpKQ0KCSAgI3NldCgkZmlsdGVyZWRFdmVudHMgPSAkY2FsZW5kYXJfdjFfVUkuQXBwbHlEYXRlRmlsdGVyKCRjZWxsRGF0ZSwkZXZlbnRzKSkNCgkgICNzZXQoJGNzc0NsYXNzQ2VsbCA9ICJjYWxlbmRhcl9kYXkiKQ0KCSAgI2lmKCRmaWx0ZXJlZEV2ZW50cyAmJiAkZmlsdGVyZWRFdmVudHMuQ291bnQgPjApDQoJCSNzZXQoJGNzc0NsYXNzQ2VsbCA9ICIkY3NzQ2xhc3NDZWxsIGhhc19ldmVudHMiKQ0KCSAgI2VuZA0KCSAgI2lmKCRjZWxsRGF0ZSA9PSAkY29yZV92Ml91dGlsaXR5LkN1cnJlbnREYXRlLkRhdGUpDQoJCSNzZXQoJGNzc0NsYXNzQ2VsbCA9ICIkY3NzQ2xhc3NDZWxsIGV2ZW50X2NhbGVuZGFyX3RvZGF5IikNCgkgICNlbmQNCiNlbmQNCg0KPHRkIGNsYXNzPSIkY3NzQ2xhc3NDZWxsIiBkYXRhLWRhdGU9IiRjYWxlbmRhcl92MV9VSS5Ub0N1bHR1cmVTYWZlU3RyaW5nKCRjZWxsRGF0ZS5EYXRlKSI+DQojaWYoJGlzQ2FsZW5kYXJEYXkpDQogICAgPHNwYW4gI2lmKCRjZWxsRGF0ZSA9PSAkY29yZV92Ml91dGlsaXR5LkN1cnJlbnREYXRlLkRhdGUpIGNsYXNzPSJ1aS10aXAiIHRpdGxlPSIkY29yZV92Ml9sYW5ndWFnZS5HZXRSZXNvdXJjZSgnVG9kYXknKSIgI2VuZD4kZGF5PC9zcGFuPg0KI2VuZA0KI3NldCgkY291bnQgPSAwKQ0KI2lmKCRpc0NhbGVuZGFyRGF5KQ0KCSNmb3JlYWNoKCRldmVudCBpbiAkZmlsdGVyZWRFdmVudHMpDQoJI2JlZm9yZWFsbA0KCSAgPHVsIGNsYXNzPSJldmVudF9saXN0Ij4NCgkjZWFjaA0KCSAgICAjaWYgKCRjb3VudCA8IDMpDQogICAgICAgIAkjc2V0KCRsaUNsYXNzU3RyaW5nID0gImV2ZW50X2xpIikNCiAgICAgICAgCSNpZigkZXZlbnQuSXNDYW5jZWxsZWQpDQogICAgICAgIAkJI3NldCgkbGlDbGFzc1N0cmluZyA9ICIkbGlDbGFzc1N0cmluZyBjYW5jZWxsZWRfZXZlbnQiKQ0KICAgICAgICAJI2VuZA0KICAgICAgICAJI2lmICgkZXZlbnQuRXZlbnRTdGFydERhdGUuRGF0ZSAhPSAkZXZlbnQuRXZlbnRFbmREYXRlLkRhdGUpDQogICAgICAgIAkgICAgI3NldCgkbGlDbGFzc1N0cmluZyA9ICIkbGlDbGFzc1N0cmluZyBtdWx0aV9kYXlfZXZlbnQiKQ0KICAgICAgICAgICAgCSNpZigkY2VsbERhdGUuRGF0ZSA9PSAkZXZlbnQuRXZlbnRTdGFydERhdGUuRGF0ZSkNCiAgICAgICAgICAgIAkJI3NldCgkbGlDbGFzc1N0cmluZyA9ICIkbGlDbGFzc1N0cmluZyBtdWx0aV9kYXlfZXZlbnRfc3RhcnQiKQ0KICAgICAgICAgICAgCSNlbmQNCiAgICAgICAgICAgIAkjaWYgKCRjZWxsRGF0ZS5EYXRlID09ICRldmVudC5FdmVudEVuZERhdGUuRGF0ZSkNCiAgICAgICAgICAgIAkgICAgI3NldCgkbGlDbGFzc1N0cmluZyA9ICIkbGlDbGFzc1N0cmluZyBtdWx0aV9kYXlfZXZlbnRfZW5kIikNCiAgICAgICAgICAgIAkjZW5kDQogICAgICAgICAgICAjZW5kDQogICAgICAgIAk8bGkgY2xhc3M9IiRsaUNsYXNzU3RyaW5nIHVpLXRpcCIgdGl0bGU9IiRldmVudC5FdmVudFRpdGxlIj48YSBocmVmPSIkY2FsZW5kYXJfdjFfdXJscy5FdmVudCgkZXZlbnQuSWQpIiBjbGFzcz0iZXZlbnRfbGluayIgPiRldmVudC5FdmVudFRpdGxlPC9hPjwvbGk+DQogICAgICAgICNlbmQNCiAgICAgICAgI3NldCgkY291bnQgPSAkY291bnQgKyAxKQ0KCSNhZnRlcmFsbA0KCSAgICAjaWYgKCRjb3VudCA+IDMpDQoJICAgICAgICAjc2V0KCRjb3VudCA9ICRjb3VudCAtIDMpDQoJICAgICAgICA8bGkgY2xhc3M9Im1vcmUiPg0KCSAgICAgICAgICAgICNpZiAoJGNvdW50ID09IDEpDQoJICAgICAgICAgICAgICAgICRjb3JlX3YyX2xhbmd1YWdlLkZvcm1hdFN0cmluZygkY29yZV92Ml9sYW5ndWFnZS5HZXRSZXNvdXJjZSgnQW5kTW9yZV9TaW5ndWxhcicpLCAkY29yZV92Ml9sYW5ndWFnZS5Gb3JtYXROdW1iZXIoJGNvdW50KSkNCgkgICAgICAgICAgICAjZWxzZQ0KCSAgICAgICAgICAgICAgICAkY29yZV92Ml9sYW5ndWFnZS5Gb3JtYXRTdHJpbmcoJGNvcmVfdjJfbGFuZ3VhZ2UuR2V0UmVzb3VyY2UoJ0FuZE1vcmVfUGx1cmFsJyksICRjb3JlX3YyX2xhbmd1YWdlLkZvcm1hdE51bWJlcigkY291bnQpKQ0KCSAgICAgICAgICAgICNlbmQNCgkgICAgICAgIDwvbGk+DQoJICAgICNlbmQNCgkgIDwvdWw+DQoJI2VuZA0KI2VuZA0KPC90ZD4NCg0K</file>
			<file name="ui.js">KGZ1bmN0aW9uICgkLCBnbG9iYWwpIHsNCiAgICBpZiAodHlwZW9mICQudGVsbGlnZW50ID09PSAndW5kZWZpbmVkJykgeyAkLnRlbGxpZ2VudCA9IHt9OyB9DQogICAgaWYgKHR5cGVvZiAkLnRlbGxpZ2VudC5ldm9sdXRpb24gPT09ICd1bmRlZmluZWQnKSB7ICQudGVsbGlnZW50LmV2b2x1dGlvbiA9IHt9OyB9DQogICAgaWYgKHR5cGVvZiAkLnRlbGxpZ2VudC5ldm9sdXRpb24ud2lkZ2V0cyA9PT0gJ3VuZGVmaW5lZCcpIHsgJC50ZWxsaWdlbnQuZXZvbHV0aW9uLndpZGdldHMgPSB7fTsgfQ0KICAgIGlmICh0eXBlb2YgJC50ZWxsaWdlbnQuZXZvbHV0aW9uLkNhbGVuZGFyID09PSAndW5kZWZpbmVkJykgeyAkLnRlbGxpZ2VudC5ldm9sdXRpb24uQ2FsZW5kYXIgPSB7fTsgfQ0KICAgIGlmICh0eXBlb2YgJC50ZWxsaWdlbnQuZXZvbHV0aW9uLkNhbGVuZGFyLndpZGdldHMgPT09ICd1bmRlZmluZWQnKSB7ICQudGVsbGlnZW50LmV2b2x1dGlvbi5DYWxlbmRhci53aWRnZXRzID0ge307IH0NCg0KDQogICAgdmFyIGVycm9ySHRtbCA9ICc8ZGl2IGNsYXNzPSJtZXNzYWdlIGVycm9yIj57RXJyb3JUZXh0fTwvZGl2PicsDQogICAgYXR0YWNoSGFuZGxlcnMgPSBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICBjb250ZXh0LndyYXBwZXIub24oJ2NsaWNrJywgJ3RyLm1vbnRoX2hlYWQgYS5uZXh0X2xpbmsnLCBmdW5jdGlvbiAoZSkgeyANCiAgICAgICAgICAgIG1vdmVOZXh0KGNvbnRleHQpOyANCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsgDQogICAgICAgIH0pOw0KICAgICAgICBjb250ZXh0LndyYXBwZXIub24oJ2NsaWNrJywgJ3RyLm1vbnRoX2hlYWQgYS5wcmV2X2xpbmsnLCBmdW5jdGlvbiAoZSkgeyANCiAgICAgICAgICAgIG1vdmVQcmV2aW91cyhjb250ZXh0KTsgDQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0pOw0KICAgICAgICBjb250ZXh0LndyYXBwZXIub24oJ2NsaWNrJywgJy5jYWxlbmRhcl9kYXknLCBmdW5jdGlvbiAoZSkgew0KICAgICAgICAgICAgaWYgKGUudGFyZ2V0ICYmIGUudGFyZ2V0LmhyZWYgJiYgZS50YXJnZXQubm9kZU5hbWUgPT0gJ0EnKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdmFyIGRhdGUgPSBwYXJzZURhdGUoJCh0aGlzKS5hdHRyKCdkYXRhLWRhdGUnKSkNCiAgICAgICAgICAgIGlmIChjb250ZXh0LmNhbGVuZGFyRGF0ZSAmJiBkYXRlLmdldEZ1bGxZZWFyKCkgPT0gY29udGV4dC5jYWxlbmRhckRhdGUuZ2V0RnVsbFllYXIoKSAmJiBkYXRlLmdldE1vbnRoKCkgPT0gY29udGV4dC5jYWxlbmRhckRhdGUuZ2V0TW9udGgoKSAmJiBkYXRlLmdldERhdGUoKSA9PSBjb250ZXh0LmNhbGVuZGFyRGF0ZS5nZXREYXRlKCkpIHsNCiAgICAgICAgICAgICAgICBnb1RvRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSArIDEsIG51bGwpOyAgIA0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBnb1RvRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSArIDEsIGRhdGUpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICAgICAgJChnbG9iYWwpLm9uKCdoYXNoY2hhbmdlJywgZnVuY3Rpb24oZCkgew0KICAgICAgICAgICB2YXIgaGFzaCA9ICQudGVsbGlnZW50LmV2b2x1dGlvbi51cmwuaGFzaERhdGEoKTsNCiAgICAgICAgICAgaWYgKGhhc2gpIHsNCiAgICAgICAgICAgICAgIGlmIChoYXNoWydjdXJyZW50RGF0ZSddKSB7DQogICAgICAgICAgICAgICAgICAgdmFyIG5ld0RhdGUgPSBwYXJzZURhdGUoaGFzaFsnY3VycmVudERhdGUnXSk7DQogICAgICAgICAgICAgICAgICAgaWYgKG5ld0RhdGUuZ2V0RnVsbFllYXIoKSAhPSBjb250ZXh0LnllYXIgfHwgbmV3RGF0ZS5nZXRNb250aCgpICsgMSAhPSBjb250ZXh0Lm1vbnRoKSB7DQogICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQuY2FsZW5kYXJEYXRlID0gbmV3RGF0ZTsNCiAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC55ZWFyID0gbmV3RGF0ZS5nZXRGdWxsWWVhcigpOw0KICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0Lm1vbnRoID0gbmV3RGF0ZS5nZXRNb250aCgpICsgMTsNCiAgICAgICAgICAgICAgICAgICAgICAgbG9hZChjb250ZXh0KTsNCiAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5ld0RhdGUgIT0gY29udGV4dC5jYWxlbmRhckRhdGUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jYWxlbmRhckRhdGUgPSBuZXdEYXRlOw0KICAgICAgICAgICAgICAgICAgICAgICBzaG93U2VsZWN0ZWREYXRlKGNvbnRleHQpOw0KICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoaGFzaFsnY3VycmVudFllYXInXSAmJiBoYXNoWydjdXJyZW50TW9udGgnXSkgew0KICAgICAgICAgICAgICAgICAgIHZhciB5ZWFyID0gcGFyc2VJbnQoaGFzaFsnY3VycmVudFllYXInXSwgMTApOw0KICAgICAgICAgICAgICAgICAgIHZhciBtb250aCA9IHBhcnNlSW50KGhhc2hbJ2N1cnJlbnRNb250aCddLCAxMCk7DQogICAgICAgICAgICAgICAgICAgaWYgKHllYXIgIT0gY29udGV4dC55ZWFyIHx8IG1vbnRoICE9IGNvbnRleHQubW9udGgpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC55ZWFyID0geWVhcjsNCiAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5tb250aCA9IG1vbnRoOw0KICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNhbGVuZGFyRGF0ZSA9IG51bGw7DQogICAgICAgICAgICAgICAgICAgICAgIGxvYWQoY29udGV4dCk7DQogICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dC5jYWxlbmRhckRhdGUgPSBudWxsOw0KICAgICAgICAgICAgICAgICAgICAgICBzaG93U2VsZWN0ZWREYXRlKGNvbnRleHQpOw0KICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIHNob3dTZWxlY3RlZERhdGUgPSBmdW5jdGlvbihjb250ZXh0KSB7DQogICAgICAgICQoJy5jYWxlbmRhcl9kYXkuc2VsZWN0ZWQnLCBjb250ZXh0LndyYXBwZXIpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpOw0KICAgICAgICBpZiAoY29udGV4dC5jYWxlbmRhckRhdGUpIHsNCiAgICAgICAgICAgICQoJy5jYWxlbmRhcl9kYXlbZGF0YS1kYXRlPSInICsgZm9ybWF0RGF0ZShjb250ZXh0LmNhbGVuZGFyRGF0ZSkgKyAnIl0nLCBjb250ZXh0LndyYXBwZXIpLmFkZENsYXNzKCdzZWxlY3RlZCcpOw0KICAgICAgICB9DQogICAgfSwNCiAgICBzZXRDb250ZW50ID0gZnVuY3Rpb24gKGNvbnRleHQsIGh0bWwsIGRvRWZmZWN0KSB7DQogICAgICAgIGNvbnRleHQuY29udGVudC5odG1sKGh0bWwpOw0KICAgICAgICBjb250ZXh0LmxvYWRpbmcuaGlkZSgpOw0KICAgICAgICBpZiAoZG9FZmZlY3QpIHsNCiAgICAgICAgICAgIGNvbnRleHQuY29udGVudC5mYWRlSW4oMjAwKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGNvbnRleHQuY29udGVudC5zaG93KCk7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIHNob3dTZWxlY3RlZERhdGUoY29udGV4dCk7DQogICAgfSwNCiAgICBwYWQgPSBmdW5jdGlvbih2LCBsKSB7DQogICAgICB2ID0gdiArICcnOw0KICAgICAgd2hpbGUgKHYubGVuZ3RoIDwgbCkgew0KICAgICAgICAgIHYgPSAnMCcgKyB2Ow0KICAgICAgfQ0KICAgICAgcmV0dXJuIHY7DQogICAgfSwNCiAgICBmb3JtYXREYXRlID0gZnVuY3Rpb24gKGRhdGUpIHsNCiAgICAgICAgcmV0dXJuICBwYWQoZGF0ZS5nZXRNb250aCgpICsgMSwgMikgKyAnLycgKyBwYWQoZGF0ZS5nZXREYXRlKCksIDIpICsgJy8nICsgcGFkKGRhdGUuZ2V0RnVsbFllYXIoKSwgNCkgKyAnIDAwOjAwOjAwJzsNCiAgICB9LA0KICAgIHBhcnNlRGF0ZSA9IGZ1bmN0aW9uKHNEYXRlKSB7DQogICAgICAgIHZhciBjb21wb25lbnRzID0gc0RhdGUuc3BsaXQoJyAnKVswXS5zcGxpdCgnLycpOw0KICAgICAgICByZXR1cm4gbmV3IERhdGUocGFyc2VJbnQoY29tcG9uZW50c1syXSwgMTApLCBwYXJzZUludChjb21wb25lbnRzWzBdLCAxMCkgLSAxLCBwYXJzZUludChjb21wb25lbnRzWzFdLCAxMCkpOw0KICAgIH0sDQogICAgZ29Ub0RhdGUgPSBmdW5jdGlvbih5ZWFyLCBtb250aCwgZGF0ZSkgew0KICAgICAgICAkLnRlbGxpZ2VudC5ldm9sdXRpb24udXJsLmhhc2hEYXRhKHsNCiAgICAgICAgICAgIGN1cnJlbnRZZWFyOiB5ZWFyLA0KICAgICAgICAgICAgY3VycmVudE1vbnRoOiBtb250aCwNCiAgICAgICAgICAgIGN1cnJlbnREYXRlOiBkYXRlID09IG51bGwgPyAnJzogZm9ybWF0RGF0ZShkYXRlKQ0KICAgICAgICB9KTsNCiAgICB9LA0KICAgIG1vdmVOZXh0ID0gZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgdmFyIG1vbnRoID0gY29udGV4dC5tb250aCArIDE7DQogICAgICAgIHZhciB5ZWFyID0gY29udGV4dC55ZWFyOw0KICAgICAgICBpZiAobW9udGggPiAxMikgew0KICAgICAgICAgICAgbW9udGggPSAxOw0KICAgICAgICAgICAgeWVhcisrOw0KICAgICAgICB9DQogICAgICAgIGdvVG9EYXRlKHllYXIsIG1vbnRoLCBudWxsKTsNCiAgICB9LA0KICAgIG1vdmVQcmV2aW91cyA9IGZ1bmN0aW9uIChjb250ZXh0KSB7DQogICAgICAgIHZhciBtb250aCA9IGNvbnRleHQubW9udGggLSAxOw0KICAgICAgICB2YXIgeWVhciA9IGNvbnRleHQueWVhcjsNCiAgICAgICAgaWYgKG1vbnRoIDwgMSkgew0KICAgICAgICAgICAgbW9udGggPSAxMjsNCiAgICAgICAgICAgIHllYXItLTsNCiAgICAgICAgfQ0KICAgICAgICBnb1RvRGF0ZSh5ZWFyLCBtb250aCwgbnVsbCk7DQogICAgfSwNCiAgICBsb2FkID0gZnVuY3Rpb24gKGNvbnRleHQpIHsNCiAgICAgICAgY29udGV4dC5jb250ZW50LmhpZGUoKTsNCiAgICAgICAgY29udGV4dC5sb2FkaW5nLnNob3coKTsNCiAgICAgICAgJC50ZWxsaWdlbnQuZXZvbHV0aW9uLmdldCh7DQogICAgICAgICAgICB1cmw6IGNvbnRleHQubG9hZGluZ1VybCwNCiAgICAgICAgICAgIGRhdGE6IHsNCiAgICAgICAgICAgICAgICB3X2NhbGVuZGFySWQ6IGNvbnRleHQuY2FsZW5kYXJJZCwNCiAgICAgICAgICAgICAgICB3X2NhbGVuZGFySWRzOiBjb250ZXh0LmNhbGVuZGFySWRzLA0KICAgICAgICAgICAgICAgIHdfZ3JvdXBJZDogY29udGV4dC5yZWZlcmVuY2VJZCwNCiAgICAgICAgICAgICAgICB3X2luY2x1ZGVTdWJHcm91cHM6IGNvbnRleHQuaW5jbHVkZVN1Ykdyb3VwcywNCiAgICAgICAgICAgICAgICB3X21vbnRoOiBjb250ZXh0Lm1vbnRoLA0KICAgICAgICAgICAgICAgIHdfeWVhcjogY29udGV4dC55ZWFyDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3BvbnNlKSB7DQogICAgICAgICAgICAgICAgc2V0Q29udGVudChjb250ZXh0LCByZXNwb25zZSwgdHJ1ZSk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgICAgICAgICBzZXRDb250ZW50KGNvbnRleHQsIGVycm9ySHRtbC5yZXBsYWNlKC9ce0Vycm9yVGV4dFx9L2csIGNvbnRleHQuZXJyb3JUZXh0KSwgZmFsc2UpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9Ow0KDQogICAgJC50ZWxsaWdlbnQuZXZvbHV0aW9uLkNhbGVuZGFyLndpZGdldHMuY2FsZW5kYXIgPSB7DQogICAgICAgIHJlZ2lzdGVyOiBmdW5jdGlvbiAoY29udGV4dCkgew0KICAgICAgICAgICAgYXR0YWNoSGFuZGxlcnMoY29udGV4dCk7DQogICAgICAgICAgICB2YXIgcSA9ICQudGVsbGlnZW50LmV2b2x1dGlvbi51cmwucGFyc2VRdWVyeShnbG9iYWwubG9jYXRpb24uaHJlZik7DQogICAgICAgICAgICB2YXIgaCA9ICQudGVsbGlnZW50LmV2b2x1dGlvbi51cmwuaGFzaERhdGEoKTsNCiAgICAgICAgICAgIGlmIChoWydjdXJyZW50RGF0ZSddKSB7DQogICAgICAgICAgICAgICAgY29udGV4dC5jYWxlbmRhckRhdGUgPSBwYXJzZURhdGUoaFsnY3VycmVudERhdGUnXSk7DQogICAgICAgICAgICAgICAgY29udGV4dC5tb250aCA9IGNvbnRleHQuY2FsZW5kYXJEYXRlLmdldE1vbnRoKCkgKyAxOw0KICAgICAgICAgICAgICAgIGNvbnRleHQueWVhciA9IGNvbnRleHQuY2FsZW5kYXJEYXRlLmdldEZ1bGxZZWFyKCk7DQogICAgICAgICAgICAgICAgbG9hZChjb250ZXh0KTsNCiAgICAgICAgICAgIH0gZWxzZSBpZiAocVsnY3VycmVudERhdGUnXSkgew0KICAgICAgICAgICAgICAgIGNvbnRleHQuY2FsZW5kYXJEYXRlID0gcGFyc2VEYXRlKHFbJ2N1cnJlbnREYXRlJ10pOw0KICAgICAgICAgICAgICAgIGNvbnRleHQubW9udGggPSBjb250ZXh0LmNhbGVuZGFyRGF0ZS5nZXRNb250aCgpICsgMTsNCiAgICAgICAgICAgICAgICBjb250ZXh0LnllYXIgPSBjb250ZXh0LmNhbGVuZGFyRGF0ZS5nZXRGdWxsWWVhcigpOw0KICAgICAgICAgICAgICAgIGxvYWQoY29udGV4dCk7DQogICAgICAgICAgICB9IGVsc2UgaWYgKGhbJ2N1cnJlbnRZZWFyJ10gJiYgaFsnY3VycmVudE1vbnRoJ10pIHsNCiAgICAgICAgICAgICAgICBjb250ZXh0Lm1vbnRoID0gcGFyc2VJbnQoaFsnY3VycmVudE1vbnRoJ10sIDEwKTsNCiAgICAgICAgICAgICAgICBjb250ZXh0LnllYXIgPSBwYXJzZUludChoWydjdXJyZW50WWVhciddLCAxMCk7DQogICAgICAgICAgICAgICAgbG9hZChjb250ZXh0KTsNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgbG9hZChjb250ZXh0KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgIH07DQoNCn0pKGpRdWVyeSwgd2luZG93KTsNCg==</file>
		</files>
	</scriptedContentFragment>
</scriptedContentFragments>